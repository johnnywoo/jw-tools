#!/bin/bash

# $ pu whatever last-arg
# becomes
# $ phpunit --filter=last-arg --stop-on-error --stop-on-failure whatever

lastArg="${@:$#:1}"

if [ -z "$1" -o "${lastArg:0:1}" = '-' ]; then
    phpunit --colors --stop-on-error --stop-on-failure --stop-on-warning --stop-on-risky "$@"
else
    length=$(($#-1))
    phpunit --colors --filter="$lastArg" --stop-on-error --stop-on-failure --stop-on-warning --stop-on-risky "${@:1:$length}"
fi
